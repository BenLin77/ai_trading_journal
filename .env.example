# ========== AI API 設定 ==========
# 支援 Google Gemini 或 DeepSeek（二選一，優先使用 DeepSeek）
#
# 雙模型架構：
# - Thinking Model (深度分析): Gemini 2.5 Flash Thinking / DeepSeek Reasoner
#   用於：每日報告、績效評估、策略建議、錯誤分析
# - Fast Model (快速對話): Gemini 2.0 Flash / DeepSeek Chat
#   用於：一般對話、快速回應

# DeepSeek API Key（推薦，費用更低）
# 請到 https://platform.deepseek.com/ 取得 API Key
# 模型：deepseek-chat (Fast) / deepseek-reasoner (Thinking)
DEEPSEEK_API_KEY=your_deepseek_api_key_here

# Google Gemini API Key（備用）
# 請到 https://makersuite.google.com/app/apikey 取得 API Key
# 模型：gemini-2.0-flash (Fast) / gemini-2.5-flash-preview (Thinking)
GEMINI_API_KEY=your_gemini_api_key_here

# ========== IBKR Flex Query 設定 ==========
# 用於自動取得 IBKR 交易記錄和庫存快照
# 設定指南：https://www.interactivebrokers.com/en/software/am/am/reports/flex_web_service_version_3.htm

# Flex Web Service Token（必填）
# 取得位置：IBKR Portal > Settings > Account Settings > Flex Web Service
IBKR_FLEX_TOKEN=your_flex_token_here

# ========== Flex Query ID ==========

# 1. 歷史交易記錄 Query ID（主要）
# 用途：交易記錄匯入、AI 分析、績效統計、現金庫存
# 建議設定查詢期間為「過去 365 天」，格式為 CSV
# 必要欄位：Symbol, TradeDate, Quantity, TradePrice, IBCommission, AssetClass, Buy/Sell
# 選擇權欄位：Strike, Expiry, Put/Call, Multiplier, UnderlyingSymbol
# 現金報告欄位：CurrencyPrimary, EndingCash, EndingSettledCash
IBKR_HISTORY_QUERY_ID=your_history_query_id

# 2. 當前持倉快照 Query ID
# 用途：即時持倉分析、風險暴露計算
# 必要欄位：Symbol, Quantity, MarkPrice, CostBasisPrice, AssetClass
# 選擇權欄位：Strike, Expiry, Put/Call, Multiplier, UnderlyingSymbol, FifoPnlUnrealized
IBKR_POSITIONS_QUERY_ID=your_positions_query_id

# ========== 選擇權市場數據設定 ==========
# 注意：選擇權市場數據（IV、Volume、OI）僅支援 yfinance
# 交易記錄和庫存快照從 IBKR Flex Query 取得（見上方設定）

# ========== 資料來源設定 ==========
# 控制系統如何取得持倉和交易數據
# - QUERY: 使用 IBKR Flex Query API (預設，適合非交易時段)
# - GATEWAY: 使用 IB Gateway/TWS 即時連線 (適合交易時段即時監控)
DATA_SOURCE=QUERY

# ========== IB Gateway 連線設定 ==========
# 當 DATA_SOURCE=GATEWAY 時使用
# IB Gateway 預設端口: 4001 (Live), 4002 (Paper)
# TWS 預設端口: 7496 (Live), 7497 (Paper)
IB_HOST=127.0.0.1
IB_PORT=4001
IB_CLIENT_ID=1

# ========== 每日報告排程設定 ==========
# 報告發送時間 (24小時制，使用 Asia/Taipei 時區)
# 這兩個變數可透過前端設定頁面調整
REPORT_TIME_HOUR=08
REPORT_TIME_MINUTE=30

# ========== Telegram 通知設定 ==========
# Bot Token: 從 @BotFather 取得
# Chat ID: 發送訊息給 bot 後，訪問 https://api.telegram.org/bot<TOKEN>/getUpdates 取得
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_CHAT_ID=your_chat_id_here
